<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FB2 Book Cover Extractor</title>
</head>
<body>
<input type="file" id="fb2FileInput" accept=".fb2">
<button onclick="extractCover()">Extract Cover</button>
<div id="bookCoverContainer"></div>

<script>
    function extractCover() {
        const fileInput = document.getElementById('fb2FileInput');
        const coverContainer = document.getElementById('bookCoverContainer');

        const file = fileInput.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
                const fb2Content = e.target.result;
                extractCoverUrl(fb2Content, coverContainer);
            };
            reader.readAsText(file);
        } else {
            coverContainer.innerHTML = '<p>Please select an FB2 file.</p>';
        }
    }

    function extractCoverUrl(fb2Content, container) {
        const parser = new DOMParser();
        const xmlDoc = parser.parseFromString(fb2Content, 'application/xml');

        try {
            const coverBinary = xmlDoc.querySelector('coverpage image').textContent;
            const coverUrl = `data:image/jpeg;base64,${coverBinary}`;

            container.innerHTML = `<img src="${coverUrl}" alt="Book Cover">`;
        } catch (err) {
            container.innerHTML = '<p>No cover found in the FB2 file.</p>';
        }
    }
</script>
</body>
</html>
